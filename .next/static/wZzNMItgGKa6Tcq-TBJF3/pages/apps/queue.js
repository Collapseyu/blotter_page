(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{XIdC:function(e,t,n){"use strict";n.r(t);var a=n("rePB"),r=n("ODXe"),i=n("Ff2n"),c=n("q1tI"),l=n("TSYQ"),o=n.n(l),u=n("6cGi"),s=n("4IlW"),d=c.forwardRef((function(e,t){var n,l=e.prefixCls,d=void 0===l?"rc-switch":l,f=e.className,p=e.checked,b=e.defaultChecked,h=e.disabled,m=e.loadingIcon,y=e.checkedChildren,g=e.unCheckedChildren,O=e.onClick,v=e.onChange,j=e.onKeyDown,w=Object(i.a)(e,["prefixCls","className","checked","defaultChecked","disabled","loadingIcon","checkedChildren","unCheckedChildren","onClick","onChange","onKeyDown"]),C=Object(u.a)(!1,{value:p,defaultValue:b}),x=Object(r.a)(C,2),k=x[0],S=x[1];function _(e,t){var n=k;return h||(S(n=e),null===v||void 0===v||v(n,t)),n}var P=o()(d,f,(n={},Object(a.a)(n,"".concat(d,"-checked"),k),Object(a.a)(n,"".concat(d,"-disabled"),h),n));return c.createElement("button",Object.assign({},w,{type:"button",role:"switch","aria-checked":k,disabled:h,className:P,ref:t,onKeyDown:function(e){e.which===s.a.LEFT?_(!1,e):e.which===s.a.RIGHT&&_(!0,e),null===j||void 0===j||j(e)},onClick:function(e){var t=_(!k,e);null===O||void 0===O||O(t,e)}}),m,c.createElement("span",{className:"".concat(d,"-inner")},k?y:g))}));d.displayName="Switch",t.default=d},bsRf:function(e,t,n){"use strict";n("1SKB"),n("J8+C")},"d1/O":function(e,t,n){"use strict";n.r(t);n("RV09");var a=n("N9UN"),r=n.n(a),i=(n("YWsy"),n("DtFj")),c=n.n(i),l=(n("SoD3"),n("9xET")),o=n.n(l),u=(n("bsRf"),n("rVaU")),s=n.n(u),d=(n("YKpo"),n("ZPTe")),f=n.n(d),p=(n("QU2i"),n("d1El")),b=n.n(p),h=(n("/P5p"),n("lB7Y")),m=n.n(h),y=(n("dBUF"),n("qu0K")),g=n.n(y),O=(n("bAY4"),n("4IMT")),v=n.n(O),j=n("KQm4"),w=(n("1mXb"),n("iJl9")),C=n.n(w),x=(n("cL9j"),n("5Dct")),k=n.n(x),S=(n("l8y+"),n("Kxs1")),_=n.n(S),P=(n("89vs"),n("lbd2")),D=n.n(P),N=n("o0o1"),T=n.n(N),I=n("HaE+"),q=n("1OyB"),Q=n("vuIU"),R=n("JX7q"),Y=n("Ji7U"),E=n("md7G"),M=n("foSv"),H=n("rePB"),z=n("q1tI"),K=n.n(z),F=n("8Kt/"),X=n.n(F),J=n("YFqc"),U=n.n(J),V=n("cJ7L"),B=n("CTES"),A=n("bRQS"),W=n("pJr+"),G=n("oUAj"),L=n("dSKx"),Z=n("Fj8Y"),$=n("bgVY"),ee=n("RtTr"),te=n("27j4"),ne=n.n(te),ae=n("5D78"),re=K.a.createElement;function ie(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(M.a)(e);if(t){var r=Object(M.a)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(E.a)(this,n)}}var ce=function(e){Object(Y.a)(n,e);var t=ie(n);function n(e){var a;return Object(q.a)(this,n),a=t.call(this,e),Object(H.a)(Object(R.a)(a),"context",void 0),Object(H.a)(Object(R.a)(a),"formRef",K.a.createRef()),Object(H.a)(Object(R.a)(a),"getData",Object(I.a)(T.a.mark((function e(){var t;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object($.d)(a.state.all,1,10);case 2:t=e.sent,a.setState({total:t.total,queues:t.queues});case 4:case"end":return e.stop()}}),e)})))),Object(H.a)(Object(R.a)(a),"onPageChange",(function(e){var t=e.current,n=e.pageSize;"undefined"===typeof t&&(t=a.state.page),"undefined"===typeof n&&(n=a.state.size),a.setState({page:t,size:n},a.getData)})),Object(H.a)(Object(R.a)(a),"onSubmit",Object(I.a)(T.a.mark((function e(){var t,n,r,i,c;return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),t=a.formRef.current.getFieldsValue(!0),n=t.max,r=t.password,i=t.description,e.next=4,Object($.a)(n,r,i);case 4:c=e.sent,Object(ae.b)(c)&&a.getData(),a.setState({loading:!1});case 7:case"end":return e.stop()}}),e)})))),Object(H.a)(Object(R.a)(a),"renderHeader",(function(){return re(_.a,{title:"\u52a8\u68ee\u5019\u673a\u5927\u5385",subTitle:"\u4f18\u79c0\u7684\u4e0a\u5c9b\u6392\u961f\u5de5\u5177"},re(D.a.Paragraph,{strong:!0},"\u5efa\u7acb\u5019\u673a\u961f\u4f0d\u8bf7\u4e25\u683c\u9075\u5b88\u6cd5\u5f8b\u6cd5\u89c4\uff01\u6240\u6709\u8fdd\u89c4\u5185\u5bb9\u5c06\u88ab\u63d0\u4ea4\u81f3\u76f8\u5173\u90e8\u95e8\u3002\u540c\u65f6\u5982\u679c\u60a8\u53d1\u73b0\u6709\u8fdd\u89c4\u5185\u5bb9\u88ab\u53d1\u5e03\uff0c\u4e5f\u8bf7\u901a\u8fc7\u90ae\u7bb1\u3001 QQ \u7b49\u65b9\u5f0f\u8054\u7cfb\u6211"),re(D.a.Paragraph,null,"\u8981\u521b\u5efa\u5efa\u7acb\u81ea\u5df1\u7684\u5019\u673a\u5385\u4f9b\u4ed6\u4eba\u767b\u5c9b\uff0c\u8bf7\u5148\u6ce8\u518c\u8d26\u53f7\uff0c\u5e76\u5b8c\u5584\u60a8\u7684 Nintendo Switch"," ","\u4ee5\u53ca\u52a8\u7269\u68ee\u53cb\u4f1a\u90e8\u5206\u8bbe\u7f6e"),re(D.a.Paragraph,null,"\u5982\u679c\u60f3\u8981\u83b7\u5f97 QQ \u63d0\u9192\u3001",re(D.a.Text,{delete:!0},"\u5fae\u4fe1\u63d0\u9192"),"\u3001",re(D.a.Text,{delete:!0},"\u90ae\u7bb1\u63d0\u9192"),"\uff0c\u8bf7\u7ed1\u5b9a\u76f8\u5173\u8d26\u53f7\u3002 \u5176\u4e2d QQ \u4e00\u952e\u767b\u5f55\u4ec5\u7528\u4e8e\u5feb\u901f\u767b\u5f55\uff0c\u4ecd\u7136\u9700\u8981\u8f93\u5165\u60a8\u7684 QQ \u53f7"))})),Object(H.a)(Object(R.a)(a),"renderForm",(function(){var e=[{key:"max",name:"\u540c\u65f6\u767b\u5c9b\u4eba\u6570",children:re(k.a,{max:7,min:1,placeholder:"\u4e0d\u5305\u62ec\u81ea\u5df1"}),initial:1},{key:"password",name:"\u767b\u5c9b\u5bc6\u7801",children:re(C.a,{placeholder:"\u767b\u5c9b\u5bc6\u7801(\u65e0\u5bc6\u7801\u7559\u7a7a)"}),initial:""},{key:"description",name:"\u63cf\u8ff0",children:re(ne.a,null),initial:"\u672c\u5c9b\u5927\u5934\u83dc xx \u5143\uff08\u975e\u65f6\u95f4\u65c5\u884c\uff09\uff0c\u8bf7\u79e9\u5e8f\u4e0a\u5c9b\uff0c\u4e0d\u6536\u624b\u7eed\u8d39"}],t=Object.assign.apply(Object,[{}].concat(Object(j.a)(e.map((function(e){return Object(H.a)({},e.key,e.initial)}))))),n=2,r="";return a.context.user.existed?0!=a.context.user.qq_connected&&""!=a.context.user.ns_id&&""!=a.context.user.ns_name&&""!=a.context.user.ac_name&&""!=a.context.user.ac_island||(n=1,r="\u8bf7\u5b8c\u5584\u60a8\u7684QQ\u53f7\u3001NS\u8d26\u53f7\u3001\u52a8\u68ee\u8d26\u53f7\uff0c\u5e76\u7ed1\u5b9a QQ \u4e92\u8054"):(n=0,r="\u8bf7\u5148\u767b\u5f55"),re(W.b,{size:50},re(G.a,{current:n},re(G.a.Step,{title:"\u6ce8\u518c\u5e76\u767b\u5f55",icon:re(V.a,null)},re(W.c,null,re(v.a,{type:"primary",onClick:function(){return a.setState({loginModal:!0})}},"\u6ce8\u518c/\u767b\u5f55"))),re(G.a.Step,{title:"\u5b8c\u5584\u4fe1\u606f",icon:re(B.a,null)},re(W.b,{textCenter:!0},re(U.a,{href:"/user/[username]",as:"/user/".concat(a.context.user.username)},re("a",{target:"_blank"},re(v.a,{type:"primary"},"\u5b8c\u5584\u4e2a\u4eba\u4fe1\u606f"))),re("p",null,"\u586b\u5199\u5b8c\u6210\u540e\uff0c\u4f60\u9700\u8981\u5237\u65b0\u5f53\u524d\u9875\u9762"))),re(G.a.Step,{title:"\u5f00\u59cb\u4f7f\u7528",icon:re(A.a,null)},re(g.a,{ref:a.formRef,initialValues:t,labelCol:{span:4},wrapperCol:{span:20}},e.map((function(e){return re(g.a.Item,{key:e.key,name:e.key,label:e.name},e.children)})),re(g.a.Item,{key:"submit",style:{textAlign:"right"},validateStatus:""==r?"success":"error",help:r,labelCol:{span:0},wrapperCol:{span:24}},re(v.a,{disabled:""!=r,type:"primary",onClick:a.onSubmit,loading:a.state.loading},"\u6253\u5f00\u673a\u573a\u5927\u95e8"))))))})),Object(H.a)(Object(R.a)(a),"renderTable",(function(){var e=[{title:"\u5c9b\u4e3b\u4fe1\u606f",key:"username",width:200,ellipsis:!0,render:function(e,t){return re(U.a,{href:"/apps/queue/[id]",as:"/apps/queue/".concat(t.id)},re("a",{target:"_blank"},t.leader.ac_island,"\u5c9b - ",t.leader.ac_name))}},{title:"\u63cf\u8ff0",key:"description",dataIndex:"description",render:function(e){return re(D.a.Text,{ellipsis:!0,style:{width:300}},e)}},{title:"\u540c\u65f6\u4eba\u6570",key:"max",dataIndex:"max",width:150,ellipsis:!0},{title:"\u6392\u961f\u4eba\u6570",key:"queue",width:150,ellipsis:!0,render:function(e,t){return re(m.a,{value:t.queue.filter((function(e){return 0==e.out_time})).length,suffix:"/".concat(t.queue.length)})}},{title:"\u5f00\u59cb\u65f6\u95f4",key:"create_time",width:150,ellipsis:!0,render:function(e,t){var n=Object(ee.a)(t.create_time,"X");return re(b.a,{title:n.format("YYYY-MM-DD HH:mm:ss")},re("span",null,n.fromNow()))}},{title:"\u72b6\u6001",key:"finish_time",width:150,ellipsis:!0,render:function(e,t){var n=Object(ee.a)(t.create_time,"X");return 0==t.finish_time?"\u8fdb\u884c\u4e2d":re(b.a,{title:n.format("YYYY-MM-DD HH:mm:ss")},re("span",null,n.fromNow()))}}];return re(W.b,{size:20},re(o.a,{justify:"end",gutter:[20,20]},re(f.a,null,re(v.a,{onClick:a.getData},"\u5237\u65b0\u6570\u636e")),re(f.a,null,re(s.a,{checkedChildren:"\u663e\u793a\u6240\u6709",unCheckedChildren:"\u663e\u793a\u8fdb\u884c\u4e2d",checked:a.state.all,onChange:function(e){return a.setState({all:e},a.getData)}}))),re(c.a,{rowKey:function(e){return e.id},dataSource:a.state.queues,scroll:{x:"auto"},onChange:a.onPageChange,pagination:{current:a.state.page,total:a.state.total,pageSize:a.state.size,showSizeChanger:!0},columns:e}))})),a.state={loading:!1,total:0,queues:[],all:!1,page:1,size:10,loginModal:!1},a}return Object(Q.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"render",value:function(){var e=this;return re("div",null,re(L.a.Consumer,null,(function(e){return re(X.a,null,re("title",null,"\u52a8\u68ee\u5019\u673a\u5927\u5385|".concat(e.blog_name)))})),re(W.b,null,re(r.a,null,this.renderHeader()),re(r.a,null,this.renderForm()),re(r.a,null,this.renderTable())),re(Z.a,{show:this.state.loginModal,onClose:function(){return e.setState({loginModal:!1})}}))}}]),n}(K.a.Component);Object(H.a)(ce,"contextType",L.a),Object(H.a)(ce,"defaultProps",{}),t.default=ce},goH4:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/apps/queue",function(){return n("d1/O")}])},rVaU:function(e,t,n){"use strict";function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var t=p();if(t&&t.has(e))return t.get(e);var n={},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in e)if(Object.prototype.hasOwnProperty.call(e,i)){var c=r?Object.getOwnPropertyDescriptor(e,i):null;c&&(c.get||c.set)?Object.defineProperty(n,i,c):n[i]=e[i]}n.default=e,t&&t.set(e,n);return n}(n("q1tI")),i=f(n("XIdC")),c=f(n("TSYQ")),l=f(n("gZBC")),o=f(n("ev5A")),u=n("vgIT"),s=f(n("fVhf")),d=f(n("m4nH"));function f(e){return e&&e.__esModule?e:{default:e}}function p(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return p=function(){return e},e}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e,t){var n={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(n[a]=e[a]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(a=Object.getOwnPropertySymbols(e);r<a.length;r++)t.indexOf(a[r])<0&&Object.prototype.propertyIsEnumerable.call(e,a[r])&&(n[a[r]]=e[a[r]])}return n},y=r.forwardRef((function(e,t){var n,a=e.prefixCls,f=e.size,p=e.loading,y=e.className,g=void 0===y?"":y,O=e.disabled,v=m(e,["prefixCls","size","loading","className","disabled"]);(0,d.default)("checked"in v||!("value"in v),"Switch","`value` is not a valid prop, do you mean `checked`?");var j=r.useContext(u.ConfigContext),w=j.getPrefixCls,C=j.direction,x=r.useContext(s.default),k=w("switch",a),S=r.createElement("div",{className:"".concat(k,"-handle")},p&&r.createElement(l.default,{className:"".concat(k,"-loading-icon")})),_=(0,c.default)(g,(h(n={},"".concat(k,"-small"),"small"===(f||x)),h(n,"".concat(k,"-loading"),p),h(n,"".concat(k,"-rtl"),"rtl"===C),n));return r.createElement(o.default,{insertExtraNode:!0},r.createElement(i.default,b({},v,{prefixCls:k,className:_,disabled:O||p,ref:t,loadingIcon:S})))}));y.__ANT_SWITCH=!0,y.displayName="Switch";var g=y;t.default=g}},[["goH4",0,2,12,1,3,4,5,6,7,8,10,11,15,18,19,22,23,9]]]);