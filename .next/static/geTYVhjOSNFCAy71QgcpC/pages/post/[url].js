(window.webpackJsonp=window.webpackJsonp||[]).push([[44],{"5D78":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r=n("wvHr");function a(t){return t.success?Object(r.b)({title:t.title,content:t.content,alertType:"success"}):Object(r.b)({title:t.title,content:t.content,alertType:"error"}),t.success}},FcBo:function(t,e,n){"use strict";n.d(e,"a",(function(){return W}));var r=n("KQm4"),a=n("rePB"),o=n("o0o1"),c=n.n(o),i=n("HaE+"),l=n("ODXe"),s=n("q1tI"),u=n.n(s),p=n("pJr+"),d=n("MfSh"),m=n("HXPj"),f=n("rffq"),h=n("Oi1/"),b=n("bTPZ"),y=n("tJ/W"),g=n("Au3V"),v=n("RtTr"),w=n("Hh1h"),x=n("AoAR"),O=n("dSKx"),j=n("5D78"),k=n("PWtr"),_=n.n(k),C=n("3nDQ"),H=n.n(C),T=n("T4vU"),A=n.n(T),P=u.a.createElement,q=P("b",null,"\u5e7f\u544a\u8bc4\u8bba\uff0c\u5df2\u88ab\u5c4f\u853d"),E=P("b",null,"\u8be5\u8bc4\u8bba\u5df2\u88ab\u5220\u9664"),I="https://github.githubassets.com/images/modules/logos_page/GitHub-Mark.png",S=u.a.createContext({url:"",callback:function(){}});function R(t){return"blotter-comment-".concat(t)}var B=function(t){var e=t.id,n=t.closeEditorCallback,r=u.a.useState(""),o=Object(l.a)(r,2),s=o[0],d=o[1],v=u.a.useState(!1),w=Object(l.a)(v,2),O=w[0],k=w[1],C=u.a.useContext(S),H=C.url,T=C.callback,A=u.a.useState(""),q=Object(l.a)(A,2),E=q[0],R=q[1],B=u.a.useState(""),L=Object(l.a)(B,2),N=L[0],W=L[1],D=u.a.useState(!0),U=Object(l.a)(D,2),Y=U[0],J=U[1],M=function(){var t=Object(i.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:k(!0),Object(x.b)({url:H,reply:e,email:E,recv:Y,raw:N}).then((function(t){Object(j.a)(t)&&(n?n():W(""),T&&T())})).finally((function(){k(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return P(p.a,{subAxis:"flex-start",wrap:!1},P(p.a.Item,{style:{flex:"0 0 5em",display:"flex",justifyContent:"center"}},P(m.a,{src:s||I,style:{width:"2.5em",height:"2.5em"}})),P(p.a.Item,{style:{flex:"1 1 auto"}},P(p.a,{direction:"TB",fullWidth:!0},P(y.j,{value:E,onBlur:function(){Object(x.g)(E,(function(t){return d(t.avatar)}))},placeholder:"\u8f93\u5165\u60a8\u7684\u90ae\u7bb1(\u4ec5\u7528\u4e8e\u6536\u53d6\u6709\u4eba\u56de\u590d\u60a8\u7684\u901a\u77e5\uff0c\u4e0d\u4f1a\u5728\u524d\u7aef\u6cc4\u9732)",style:{width:"100%"},onChange:R,hint:""!==E&&!/^(\w+)(\.\w+)*@(\w+)(\.\w+)*.(\w+)$/i.test(E)&&P(y.d,{error:!0},"\u4f60\u786e\u5b9a\u8fd9\u662f\u4e00\u4e2a\u90ae\u7bb1\uff1f")}),P(y.g,{value:N,rows:5,placeholder:"\u793c\u8c8c\u4ea4\u6d41\uff0c\u81f3\u5c115\u4e2a\u5b57\u7b26",style:{width:"100%"},onChange:W,hint:""!==N&&N.length<5&&P(y.d,{error:!0},"\u8bc4\u8bba\u8fde\u4e94\u4e2a\u5b57\u90fd\u4e0d\u5230\uff1f\u4e0d\u4f1a\u5427\u4e0d\u4f1a\u5427")}),P(p.a,null,P(y.a,{value:Y,onChange:J},"\u6536\u5230\u56de\u590d\u65f6\u4f7f\u7528\u90ae\u4ef6\u901a\u77e5"),P(f.d,{trigger:["click","hover"],placement:"bottom",style:{lineHeight:"100%"},popoverClass:_.a.shadow,popoverStyle:Object(a.a)({boxShadow:"5px 5px 30px var(--shadow)"},"--popover-backgroud","var(--background)"),component:P(b.a,{style:{background:"var(--background)",maxWidth:"80vw"}},P("p",null,"\u8bc4\u8bba\u652f\u6301Markdown\uff0c\u5982\u679c\u6709\u4eba\u56de\u590d\u4f60\u7684\u8bc4\u8bba\uff0c\u4f1a\u6709\u90ae\u4ef6\u63d0\u9192\u53d1\u9001\u5230\u4f60\u7684\u90ae\u7bb1\uff0c\u5982\u679c\u4e0d\u60f3\u67e5\u770b\uff0c\u53ef\u4ee5\u53d6\u6d88"),P("p",null,"\u5934\u50cf\u5c06\u4f18\u5148\u4f7f\u7528\u90ae\u7bb1\u5bf9\u5e94Github\u8d26\u6237\u5934\u50cf,\u5982\u679c\u83b7\u53d6\u5931\u8d25\u5c06\u4f7f\u7528",P("a",{href:"https://cn.gravatar.com/"},"Gravatar"),"\u5934\u50cf"),P("p",null,"\u90ae\u7bb1\u5730\u5740\u4e0d\u4f1a\u5728\u524d\u7aef\u6e32\u67d3\uff0c\u53ef\u4ee5\u907f\u514d\u88ab\u626b\u63cf\u5de5\u5177\u8bb0\u5f55\uff0c\u4f46\u4ecd\u53ef\u80fd\u901a\u8fc7\u5934\u50cf\u5730\u5740\u9006\u63a8\u51fa\u90ae\u7bb1"),P("p",null,"\u8bc4\u8bba\u5185\u5bb9\u8bf7\u9075\u5b88\u76f8\u5e94\u6cd5\u5f8b\u6cd5\u89c4\uff0c\u5e76\u4e14\u8bf7\u4e0d\u8981\u53d1\u5e03\u5e7f\u544a"))},P(h.G,null)),P(p.a.Item,{style:{flex:"1 1 auto",textAlign:"right"}},P(g.b,{primary:!0,neumorphism:!0,onClick:M,loading:O,disabled:N.length<5||!/^(\w+)(\.\w+)*@(\w+)(\.\w+)*.(\w+)$/i.test(E)},"\u8bc4\u8bba"))))))},L=function t(e){var n,r=e.comment,a=e.depth,o=e.quote,c=e.parent,i=u.a.useState(!1),s=Object(l.a)(i,2),d=s[0],b=s[1],y=Object(v.a)(r.time),g=function(){return P(u.a.Fragment,null,d?P(B,{id:r.id,closeEditorCallback:function(){return b(!1)}}):null,P(N,{comments:r.children,depth:a+1,parent:r}))},x=u.a.useContext(O.a).big_screen?5:2;return n=o?[P("span",{key:"jump",className:Object(w.a)(H.a.secondary,H.a.em75),onClick:function(){return function(t){var e=document.getElementById(R(t)),n=e.getBoundingClientRect().top+window.pageYOffset;e&&n>0&&scrollTo(0,n-10)}(r.id)},style:{lineHeight:"100%",cursor:"pointer"}},"\u8df3\u8f6c\u5230\u8be5\u8bc4\u8bba")]:[d?P("span",{key:"cancel",className:Object(w.a)(H.a.secondary,H.a.em75),onClick:function(){return b(!1)},style:{cursor:"pointer",lineHeight:"100%"}},"\u53d6\u6d88\u56de\u590d",P(h.e,null)):P("span",{key:"reply",className:Object(w.a)(H.a.secondary,H.a.em75),onClick:function(){return b(!0)},style:{cursor:"pointer",lineHeight:"100%"}},"\u56de\u590d"),P("span",{key:"email",className:Object(w.a)(H.a.secondary,H.a.em75),style:{lineHeight:"100%"}},r.recv?P(f.c,{title:"\u5f53\u4f60\u56de\u590d\u8be5\u8bc4\u8bba\uff0c\u8bc4\u8bba\u8005\u4f1a\u6536\u5230\u90ae\u4ef6\u63d0\u9192\uff08\u4f46\u662f\u4ed6/\u5979\u4e0d\u4e00\u5b9a\u4f1a\u770b\u90ae\u4ef6\uff09"},P(h.z,null)):P(f.c,{title:"\u5f53\u4f60\u56de\u590d\u8be5\u8bc4\u8bba\uff0c\u8bc4\u8bba\u8005\u4e0d\u4f1a\u6536\u5230\u90ae\u4ef6\u63d0\u9192\uff08\u6240\u4ee5\u4f60\u53ef\u80fd\u65e0\u6cd5\u5f97\u5230\u53cd\u9988\uff09"},P(h.i,null)))],P("div",{id:o?"":R(r.id),className:A.a.comment},P(p.a,{subAxis:"flex-start",wrap:!1,style:o?{borderLeft:"#ccc 5px solid",paddingLeft:10}:{}},P(p.a.Item,{style:{flex:"0 0 5em",display:"flex",justifyContent:"center"}},P(m.a,{src:r.avatar?r.avatar:I,style:{width:"2.5em",height:"2.5em"}})),P(p.a.Item,{style:{flex:"1 1 auto"}},P(p.a,{mainSize:"small",direction:"TB",fullWidth:!0},P(p.a,{mainAxis:"flex-start"},r.email,P(f.c,{title:y.format("YYYY-MM-DD HH:mm:ss")},P("span",{className:Object(w.a)(H.a.secondary,H.a.em75)},y.fromNow()))),P("div",null,r.ad?q:r.show?P("div",null,!o&&1!=a&&a>=x?P(t,{comment:c,depth:a,quote:!0}):null,P("div",{dangerouslySetInnerHTML:{__html:r.content}})):E),P(p.a,{mainAxis:"flex-start",subAxis:"baseline"},n),!o&&P("hr",null),!o&&a<x?g():null))),!o&&a>=x?g():null)},N=function(t){var e=t.comments,n=t.depth,a=t.parent,o=t.total;return t.loading?P(d.a,null):e.length||1==n?P(p.a,{direction:"TB",fullWidth:!0,className:"comment-list"},[P("p",{key:"total"},o?"\u5171 ".concat(o," \u6761\u8bc4\u8bba"):null)].concat(Object(r.a)(e.map((function(t){return P(p.a.Item,{key:t.id},P(L,{comment:t,depth:n,quote:!1,parent:a}))}))))):null};function W(t){var e=t.url,n=u.a.useState(!1),r=Object(l.a)(n,2),a=r[0],o=r[1],c=u.a.useState(0),i=Object(l.a)(c,2),s=i[0],d=i[1],m=u.a.useState([]),f=Object(l.a)(m,2),h=f[0],b=f[1],y=u.a.useCallback((function(){o(!0),Object(x.j)(e).then((function(t){d(t.total),b(t.comments.reverse())})).finally((function(){o(!1)}))}),[o,d,b,e]);return u.a.useEffect((function(){return y()}),[]),P(S.Provider,{value:{url:e,callback:y}},P(p.a,{direction:"TB",id:"blotter-comment",className:A.a.comments,fullWidth:!0},P(B,{id:"000000000000"}),P(N,{comments:h,depth:1,total:s,loading:a})))}},RrUq:function(t,e,n){t.exports={"lightbox-background":"lightbox-background___1kP16",lightboxBackground:"lightbox-background___1kP16","lightbox-title":"lightbox-title___2JHg4",lightboxTitle:"lightbox-title___2JHg4","image-show":"image-show___2Q2aL",imageShow:"image-show___2Q2aL"}},TULW:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/[url]",function(){return n("cgyg")}])},cgyg:function(t,e,n){"use strict";n.r(e);var r=n("o0o1"),a=n.n(r),o=n("HaE+"),c=n("1OyB"),i=n("JX7q"),l=n("vuIU"),s=n("Ji7U"),u=n("md7G"),p=n("foSv"),d=n("rePB"),m=n("q1tI"),f=n.n(m),h=n("8Kt/"),b=n.n(h),y=n("nOHt"),g=n("FcBo"),v=n("pJr+"),w=n("gkId"),x=n("Oi1/"),O=n("bTPZ"),j=n("HXPj"),k=n("Au3V"),_=n("X7zY"),C=n("AoAR"),H=n("dSKx"),T=(n("Vdni"),f.a.createElement);function A(t){var e=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,r=Object(p.a)(t);if(e){var a=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(u.a)(this,n)}}var P=function(t){Object(s.a)(n,t);var e=A(n);function n(t){var r;return Object(c.a)(this,n),r=e.call(this,t),Object(d.a)(Object(i.a)(r),"render_share",(function(){return T(H.a.Consumer,null,(function(t){if("undefined"===typeof document)return null;var e="".concat(t.root.replace(/\/$/,""),"/").concat(document.location.pathname.replace(/^\//,""));return T(v.a,{direction:"TB",mainAxis:"flex-start",fullWidth:!0},T(v.a,{direction:"LR"},T(v.a.Item,{style:{flex:"0 0 5em",display:"flex",justifyContent:"center"}},T(j.a,{src:t.avatar,style:{width:"5em",height:"5em"}})),T(v.a.Item,{style:{flex:"1 1 auto"}},T("strong",null,t.author),T("div",null,"\u672c\u6587\u7ae0\u53d1\u5e03\u81ea ",T("a",{href:t.root},t.blog_name),"\uff0c\u539f\u6587\u300e",T("a",{href:e},r.props.post.title),"\u300f",T("br",null),"\u5982\u65e0\u7279\u522b\u8bf4\u660e\uff0c\u53ef\u4ee5\u76f4\u63a5\u8f6c\u8f7d\uff0c\u4f46\u8bf7\u6ce8\u660e\u539f\u6587\u51fa\u5904\u94fe\u63a5\uff1a",T("a",{href:e},e)))),T(v.a,{direction:"LR",mainAxis:"space-around"},T(k.a,{target:"_blank",href:"http://connect.qq.com/widget/shareqq/index.html?url=".concat(encodeURIComponent(e),"&sharesource=qzone&title=").concat(encodeURIComponent(r.props.post.title),"&pics=").concat(r.props.post.head_image,"&summary=").concat(r.props.post.abstract,"&desc=").concat(r.props.post.abstract),icon:T(x.F,null)}),T(k.a,{target:"_blank",href:"https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=".concat(encodeURIComponent(e),"&sharesource=qzone&title=").concat(encodeURIComponent(r.props.post.title),"&pics=").concat(r.props.post.head_image,"&summary=").concat(r.props.post.abstract),icon:T(x.H,null)}),T(k.b,{icon:T(x.w,null),onClick:function(){return alert("\u8bf7\u590d\u5236\uff1a".concat(e))}})))}))})),r.state={},r}return Object(l.a)(n,null,[{key:"getInitialProps",value:function(){var t=Object(o.a)(a.a.mark((function t(e){var n,r;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.query.url,Array.isArray(n)&&(n=n[0]),t.next=4,Object(C.w)(n);case 4:return r=t.sent,t.abrupt("return",{post:r});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this.props.router.query.url;Array.isArray(t)&&(t=t[0]),Object(C.T)(t)}},{key:"render",value:function(){var t=this;return"undefined"===typeof this.props.post?null:T(f.a.Fragment,null,T(H.a.Consumer,null,(function(e){return T(b.a,null,T("title",null,"".concat(t.props.post.title,"|").concat(e.blog_name)),T("meta",{name:"keywords",key:"keywords",content:Array.isArray(t.props.post.keywords)?t.props.post.keywords.join(","):""}),T("meta",{key:"description",name:"description",content:t.props.post.abstract}))})),T(v.a,{direction:"TB",fullWidth:!0},T(O.a,{neumorphism:!0},T(w.a,{post:this.props.post})),T(O.a,{neumorphism:!0},this.render_share()),T(O.a,{neumorphism:!0},T(g.a,{url:"/post/".concat(this.props.router.query.url)}))),T(_.a,{style:{position:"fixed"},content:this.props.post.content}))}}]),n}(f.a.Component);Object(d.a)(P,"defaultProps",{anchors:[]}),e.default=Object(y.withRouter)(P)},dY07:function(t,e,n){"use strict";n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return p}));var r=n("rePB"),a=n("q1tI"),o=n.n(a),c=(n("RrUq"),o.a.createElement);function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function l(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){Object(r.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function s(t){var e=t.src,n=t.alt,r=void 0===n?"":n,a=t.title,o=void 0===a?"":a,c=t.initialWidth,i=void 0===c?"unset":c,l=t.initialHeight,s=void 0===l?"unset":l,u=document.body,p=window.scrollY;u.style.position="fixed",u.style.top="".concat(-p,"px");var d=document.createElement("div");d.className="image-lightbox",document.body.appendChild(d);var m=document.createElement("span");m.innerText="\xd7",m.className="close",d.appendChild(m);var f=document.createElement("span");f.innerText="\u6eda\u8f6e\u7f29\u653e\u56fe\u7247\uff0c\u62d6\u62fd\u4fee\u6539\u4f4d\u7f6e",f.className="hint",d.appendChild(f);var h=document.createElement("p");h.innerText=o||r,h.innerHTML&&d.appendChild(h);var b=document.createElement("img");b.src=e,b.alt=r,b.title=o,b.style.height=s,b.style.width=i,d.appendChild(b);var y=b.naturalWidth/b.naturalHeight,g=!1,v=0,w=0,x=0,O=0;b.onmousedown=function(t){b.ondragstart=function(){return!1},b.style.cursor="grabbing",g=!0,x=t.offsetX,O=t.offsetY},b.onmousemove=function(t){g&&(v+=t.offsetX-x,w+=t.offsetY-O,b.style.marginLeft="".concat(v,"px"),b.style.marginTop="".concat(w,"px"))},b.onmouseup=function(t){b.style.cursor="grab",g=!1},b.onclick=function(t){t.stopPropagation()};var j=function(t){var e=b.height-t.deltaY;b.style.maxHeight="unset",b.style.maxWidth="unset",b.style.height="".concat(e,"px"),b.style.width="".concat(e*y,"px")},k=function(t){27===t.keyCode&&_()},_=function(){document.removeEventListener("keydown",k),document.removeEventListener("mousewheel",j),d.remove(),u.style.position="",u.style.top="",window.scrollTo(0,p)};document.addEventListener("keydown",k),document.addEventListener("mousewheel",j),d.onclick=_,m.onclose=_}e.a=function(t){var e=t.src,n=t.thumbnail,r=void 0===n?e:n,a=t.alt,o=t.title,i=t.height,u=void 0===i?"100%":i,p=t.width,d=void 0===p?"100%":p,m=t.maxHeight,f=t.clickable,h=void 0!==f&&f,b=t.style;return c("div",{className:"image-container",style:l({height:u,width:d,maxHeight:m,cursor:h?"pointer":"unset"},b),onClick:function(){h&&s({src:e,alt:a,title:o})}},c("div",{className:"image",style:{backgroundImage:"url('".concat(r,"')")}}))};var u=function(t){try{var e=t.parentElement,n=t.src,r=t.alt,a=t.title;e.removeAttribute("href"),e.onclick=function(){return s({src:n,alt:r,title:a})}}catch(o){console.error(o)}},p=function(t){try{t.style.cursor="pointer";var e=(r=t.outerHTML,window.btoa(r.replace(/[\u00A0-\u2666]/g,(function(t){return"&#".concat(t.charCodeAt(0),";")})))).replace(/\n/g,""),n=t.getAttribute("title")?t.getAttribute("title"):t.parentElement.title;t.onclick=function(){return s({src:"data:image/svg+xml;base64,".concat(e," "),title:n,alt:n,initialHeight:"50%"})}}catch(a){console.error(a)}var r}}},[["TULW",0,2,10,1,3,4,5,6,7,8,11,12,15,19,9]]]);