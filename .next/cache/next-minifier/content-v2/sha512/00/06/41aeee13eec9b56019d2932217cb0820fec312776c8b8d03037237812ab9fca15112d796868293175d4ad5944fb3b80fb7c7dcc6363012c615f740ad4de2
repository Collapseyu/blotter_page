{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[64,17],{\"EE/t\":function(t,e,n){\"use strict\";n.r(e);n(\"RV09\");var o=n(\"N9UN\"),a=n.n(o),r=(n(\"X1UN\"),n(\"hqwM\")),i=n.n(r),l=(n(\"SoD3\"),n(\"9xET\")),c=n.n(l),p=(n(\"1mXb\"),n(\"iJl9\")),s=n.n(p),u=(n(\"YKpo\"),n(\"ZPTe\")),f=n.n(u),m=(n(\"89vs\"),n(\"lbd2\")),d=n.n(m),h=(n(\"bAY4\"),n(\"4IMT\")),g=n.n(h),b=(n(\"SJAb\"),n(\"pWf2\")),y=n.n(b),v=n(\"o0o1\"),O=n.n(v),w=n(\"HaE+\"),T=n(\"1OyB\"),j=n(\"vuIU\"),k=n(\"JX7q\"),P=n(\"Ji7U\"),S=n(\"md7G\"),_=n(\"foSv\"),x=n(\"rePB\"),R=n(\"q1tI\"),C=n.n(R),E=n(\"8Kt/\"),I=n.n(E),q=n(\"nOHt\"),B=n(\"pJr+\"),N=n(\"dSKx\"),A=n(\"AoAR\"),D=n(\"5D78\"),L=n(\"IgCw\"),W=C.a.createElement;function G(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(_.a)(t);if(e){var a=Object(_.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(S.a)(this,n)}}var M=function(t){Object(P.a)(n,t);var e=G(n);function n(t){var o;return Object(T.a)(this,n),o=e.call(this,t),Object(x.a)(Object(k.a)(o),\"context\",void 0),Object(x.a)(Object(k.a)(o),\"getData\",Object(w.a)(O.a.mark((function t(){var e;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.p)(o.props.router.query.username);case 2:e=t.sent,o.setState({user:e});case 4:case\"end\":return t.stop()}}),t)})))),Object(x.a)(Object(k.a)(o),\"update\",Object(w.a)(O.a.mark((function t(){var e,n,a,r,i,l,c,p,s,u;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o.setState({loading:!0}),e=o.state.user,n=e.username,a=e.email,r=e.ns_id,i=e.ns_name,l=e.ac_name,c=e.ac_island,p=e.qq,s=e.avatar,t.next=4,Object(A.P)(n,a,s,r,i,l,c,p,o.state.password);case 4:u=t.sent,Object(D.b)(u)&&(o.props.router.push(\"/user/[username]\",\"/user/\".concat(n)),o.context.callback({user:o.state.user})),o.setState({loading:!1});case 7:case\"end\":return t.stop()}}),t)})))),o.state={user:o.props.user,loading:!1,loadingAvatar:!1,password:\"\"},o}return Object(j.a)(n,[{key:\"componentDidMount\",value:function(){this.getData()}},{key:\"render\",value:function(){var t=this,e=[{key:\"avatar\",name:\"\\u5934\\u50cf\",self:!0,rewrite:function(t){return t.replace(\"http://\",\"https://\")}},{key:\"username\",name:\"\\u7528\\u6237\\u540d\",self:!1},{key:\"email\",name:\"\\u90ae\\u7bb1\",self:!1},{key:\"qq\",name:\"QQ \\u53f7\",self:!0},{key:\"ns_id\",name:\"NS ID\",self:!1,prefix:\"SW\",rewrite:function(t){return t.replace(/[^0-9\\-]/g,\"\")}},{key:\"ns_name\",name:\"NS \\u540d\\u79f0\",self:!1},{key:\"ac_name\",name:\"\\u52a8\\u68ee\\u540d\\u79f0\",self:!1},{key:\"ac_island\",name:\"\\u52a8\\u68ee\\u5c9b\\u540d\",self:!1,suffix:\"\\u5c9b\",rewrite:function(t){return t.length>0&&\"\\u5c9b\"==t[t.length-1]&&(t=t.slice(0,t.length-1)),t}}],n=this.state.user.self?e:e.filter((function(t){return!t.self}));return W(a.a,null,W(N.a.Consumer,null,(function(e){return W(I.a,null,W(\"title\",null,\"\".concat(t.props.router.query.username,\"|\\u7528\\u6237\\u9875|\").concat(e.blog_name)))})),W(\"p\",{style:{textAlign:\"center\"}},W(y.a,{size:128,src:this.state.user.avatar})),W(L.a,{condition:this.state.user.self},W(B.b,{direction:\"horizontal\",flexCenter:!0},W(g.a,{loading:this.state.loadingAvatar,onClick:Object(w.a)(O.a.mark((function e(){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.setState({loadingAvatar:!0}),e.next=3,Object(A.g)(t.state.user.email);case 3:n=e.sent,t.setState((function(t){var e=t.user;return e.avatar=n.avatar,{user:e,loadingAvatar:!1}}));case 5:case\"end\":return e.stop()}}),e)})))},\"\\u6839\\u636e\\u90ae\\u7bb1\\u66f4\\u65b0 Github\\u3001Gavatar \\u5934\\u50cf\"),W(\"a\",{href:\"/api/user/qq_avatar\",target:\"_blank\"},W(g.a,{disabled:!this.state.user.qq_connected},\"\\u66f4\\u65b0 QQ \\u5934\\u50cf\")),W(g.a,{onClick:function(){return t.getData()}},\"\\u5237\\u65b0\\u6570\\u636e\"))),W(i.a,{dataSource:n,renderItem:function(e){return W(i.a.Item,{key:e.key},W(c.a,{style:{width:\"100%\"}},W(f.a,{span:4},W(d.a.Text,{strong:!0},e.name)),W(f.a,{span:20},t.state.user.self?W(s.a,{addonBefore:e.prefix,addonAfter:e.suffix,value:t.state.user[e.key],onChange:function(n){var o=n.target.value;e.rewrite&&(o=e.rewrite(o)),t.setState((function(t){var n=t.user;return n[e.key]=o,{user:n}}))}}):W(\"p\",null,e.prefix,\" \",t.state.user[e.key],\" \",e.suffix))))}}),W(L.a,{condition:this.state.user.self},W(B.b,null,W(s.a,{type:\"password\",placeholder:\"\\u5982\\u679c\\u4e0d\\u9700\\u8981\\u4fee\\u6539\\u5bc6\\u7801\\u8bf7\\u7559\\u7a7a\",value:this.state.password,onChange:function(e){return t.setState({password:e.target.value})}}),W(c.a,{justify:\"space-between\"},W(f.a,null,this.state.user.qq_connected?W(g.a,{disabled:!0},\"\\u5df2\\u7ed1\\u5b9a QQ \\u767b\\u5f55\"):W(\"a\",{href:\"/api/user/jump_to_qq?state=connect\",target:\"_blank\"},W(g.a,null,\"\\u7ed1\\u5b9a QQ \\u767b\\u5f55\"))),W(f.a,null,this.state.user.github_connected?W(g.a,{disabled:!0},\"\\u5df2\\u7ed1\\u5b9a Github \\u767b\\u5f55\"):W(\"a\",{href:\"/api/user/jump_to_github?state=connect\",target:\"_blank\"},W(g.a,null,\"\\u7ed1\\u5b9a Github \\u767b\\u5f55\"))),W(f.a,{style:{textAlign:\"right\"}},W(g.a,{loading:this.state.loading,type:\"primary\",onClick:this.update},\"\\u66f4\\u65b0\\u4fe1\\u606f\"))))))}}],[{key:\"getInitialProps\",value:function(){var t=Object(w.a)(O.a.mark((function t(e){var n;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(A.p)(e.query.username);case 2:return n=t.sent,t.abrupt(\"return\",{user:n});case 4:case\"end\":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}]),n}(C.a.Component);Object(x.a)(M,\"defaultProps\",{}),Object(x.a)(M,\"contextType\",N.a),e.default=Object(q.withRouter)(M)},IgCw:function(t,e,n){\"use strict\";var o=n(\"1OyB\"),a=n(\"vuIU\"),r=n(\"Ji7U\"),i=n(\"md7G\"),l=n(\"foSv\"),c=n(\"rePB\"),p=n(\"q1tI\");function s(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=Object(l.a)(t);if(e){var a=Object(l.a)(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return Object(i.a)(this,n)}}var u=function(t){Object(r.a)(n,t);var e=s(n);function n(t){return Object(o.a)(this,n),e.call(this,t)}return Object(a.a)(n,[{key:\"render\",value:function(){return this.props.condition?this.props.children:null}}]),n}(n.n(p).a.Component);Object(c.a)(u,\"defaultProps\",{condition:!0}),e.a=u},QU2i:function(t,e,n){\"use strict\";n(\"1SKB\"),n(\"iGLF\")},SJAb:function(t,e,n){\"use strict\";n(\"1SKB\"),n(\"Tlp2\")},iGLF:function(t,e,n){t.exports={\"ant-tooltip\":\"ant-tooltip\",antTooltip:\"ant-tooltip\",\"ant-tooltip-hidden\":\"ant-tooltip-hidden\",antTooltipHidden:\"ant-tooltip-hidden\",\"ant-tooltip-placement-top\":\"ant-tooltip-placement-top\",antTooltipPlacementTop:\"ant-tooltip-placement-top\",\"ant-tooltip-placement-topLeft\":\"ant-tooltip-placement-topLeft\",antTooltipPlacementTopLeft:\"ant-tooltip-placement-topLeft\",\"ant-tooltip-placement-topRight\":\"ant-tooltip-placement-topRight\",antTooltipPlacementTopRight:\"ant-tooltip-placement-topRight\",\"ant-tooltip-placement-right\":\"ant-tooltip-placement-right\",antTooltipPlacementRight:\"ant-tooltip-placement-right\",\"ant-tooltip-placement-rightTop\":\"ant-tooltip-placement-rightTop\",antTooltipPlacementRightTop:\"ant-tooltip-placement-rightTop\",\"ant-tooltip-placement-rightBottom\":\"ant-tooltip-placement-rightBottom\",antTooltipPlacementRightBottom:\"ant-tooltip-placement-rightBottom\",\"ant-tooltip-placement-bottom\":\"ant-tooltip-placement-bottom\",antTooltipPlacementBottom:\"ant-tooltip-placement-bottom\",\"ant-tooltip-placement-bottomLeft\":\"ant-tooltip-placement-bottomLeft\",antTooltipPlacementBottomLeft:\"ant-tooltip-placement-bottomLeft\",\"ant-tooltip-placement-bottomRight\":\"ant-tooltip-placement-bottomRight\",antTooltipPlacementBottomRight:\"ant-tooltip-placement-bottomRight\",\"ant-tooltip-placement-left\":\"ant-tooltip-placement-left\",antTooltipPlacementLeft:\"ant-tooltip-placement-left\",\"ant-tooltip-placement-leftTop\":\"ant-tooltip-placement-leftTop\",antTooltipPlacementLeftTop:\"ant-tooltip-placement-leftTop\",\"ant-tooltip-placement-leftBottom\":\"ant-tooltip-placement-leftBottom\",antTooltipPlacementLeftBottom:\"ant-tooltip-placement-leftBottom\",\"ant-tooltip-inner\":\"ant-tooltip-inner\",antTooltipInner:\"ant-tooltip-inner\",\"ant-tooltip-arrow\":\"ant-tooltip-arrow\",antTooltipArrow:\"ant-tooltip-arrow\",\"ant-tooltip-arrow-content\":\"ant-tooltip-arrow-content\",antTooltipArrowContent:\"ant-tooltip-arrow-content\",\"ant-tooltip-pink\":\"ant-tooltip-pink\",antTooltipPink:\"ant-tooltip-pink\",\"ant-tooltip-magenta\":\"ant-tooltip-magenta\",antTooltipMagenta:\"ant-tooltip-magenta\",\"ant-tooltip-red\":\"ant-tooltip-red\",antTooltipRed:\"ant-tooltip-red\",\"ant-tooltip-volcano\":\"ant-tooltip-volcano\",antTooltipVolcano:\"ant-tooltip-volcano\",\"ant-tooltip-orange\":\"ant-tooltip-orange\",antTooltipOrange:\"ant-tooltip-orange\",\"ant-tooltip-yellow\":\"ant-tooltip-yellow\",antTooltipYellow:\"ant-tooltip-yellow\",\"ant-tooltip-gold\":\"ant-tooltip-gold\",antTooltipGold:\"ant-tooltip-gold\",\"ant-tooltip-cyan\":\"ant-tooltip-cyan\",antTooltipCyan:\"ant-tooltip-cyan\",\"ant-tooltip-lime\":\"ant-tooltip-lime\",antTooltipLime:\"ant-tooltip-lime\",\"ant-tooltip-green\":\"ant-tooltip-green\",antTooltipGreen:\"ant-tooltip-green\",\"ant-tooltip-blue\":\"ant-tooltip-blue\",antTooltipBlue:\"ant-tooltip-blue\",\"ant-tooltip-geekblue\":\"ant-tooltip-geekblue\",antTooltipGeekblue:\"ant-tooltip-geekblue\",\"ant-tooltip-purple\":\"ant-tooltip-purple\",antTooltipPurple:\"ant-tooltip-purple\",\"ant-tooltip-rtl\":\"ant-tooltip-rtl\",antTooltipRtl:\"ant-tooltip-rtl\"}},pWf2:function(t,e,n){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),e.default=void 0;var o=function(t){if(t&&t.__esModule)return t;if(null===t||\"object\"!==p(t)&&\"function\"!==typeof t)return{default:t};var e=c();if(e&&e.has(t))return e.get(t);var n={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in t)if(Object.prototype.hasOwnProperty.call(t,a)){var r=o?Object.getOwnPropertyDescriptor(t,a):null;r&&(r.get||r.set)?Object.defineProperty(n,a,r):n[a]=t[a]}n.default=t,e&&e.set(t,n);return n}(n(\"q1tI\")),a=l(n(\"TSYQ\")),r=n(\"vgIT\"),i=l(n(\"m4nH\"));function l(t){return t&&t.__esModule?t:{default:t}}function c(){if(\"function\"!==typeof WeakMap)return null;var t=new WeakMap;return c=function(){return t},t}function p(t){return(p=\"function\"===typeof Symbol&&\"symbol\"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(t)}function s(){return(s=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(t[o]=n[o])}return t}).apply(this,arguments)}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,\"value\"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function m(t,e){return(m=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function d(t){var e=function(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,o=g(t);if(e){var a=g(this).constructor;n=Reflect.construct(o,arguments,a)}else n=o.apply(this,arguments);return h(this,n)}}function h(t,e){return!e||\"object\"!==p(e)&&\"function\"!==typeof e?function(t){if(void 0===t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return t}(t):e}function g(t){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var b=function(t,e){var n={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(n[o]=t[o]);if(null!=t&&\"function\"===typeof Object.getOwnPropertySymbols){var a=0;for(o=Object.getOwnPropertySymbols(t);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(t,o[a])&&(n[o[a]]=t[o[a]])}return n},y=function(t){!function(t,e){if(\"function\"!==typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&m(t,e)}(p,t);var e,n,l,c=d(p);function p(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}(this,p),(t=c.apply(this,arguments)).state={scale:1,mounted:!1,isImgExist:!0},t.setScale=function(){if(t.avatarChildren&&t.avatarNode){var e=t.avatarChildren.offsetWidth,n=t.avatarNode.offsetWidth,o=t.props.gap,a=void 0===o?4:o;0===e||0===n||t.lastChildrenWidth===e&&t.lastNodeWidth===n||(t.lastChildrenWidth=e,t.lastNodeWidth=n),2*a<n&&t.setState({scale:n-2*a<e?(n-2*a)/e:1})}},t.handleImgLoadError=function(){var e=t.props.onError;!1!==(e?e():void 0)&&t.setState({isImgExist:!1})},t.renderAvatar=function(e){var n,r,l=e.getPrefixCls,c=t.props,p=c.prefixCls,f=c.shape,m=c.size,d=c.src,h=c.srcSet,g=c.icon,y=c.className,v=c.alt,O=c.draggable,w=b(c,[\"prefixCls\",\"shape\",\"size\",\"src\",\"srcSet\",\"icon\",\"className\",\"alt\",\"draggable\"]);(0,i.default)(!(\"string\"===typeof g&&g.length>2),\"Avatar\",\"`icon` is using ReactNode instead of string naming in v4. Please check `\".concat(g,\"` at https://ant.design/components/icon\"));var T=t.state,j=T.isImgExist,k=T.scale,P=(T.mounted,l(\"avatar\",p)),S=(0,a.default)((u(n={},\"\".concat(P,\"-lg\"),\"large\"===m),u(n,\"\".concat(P,\"-sm\"),\"small\"===m),n)),_=(0,a.default)(P,y,S,(u(r={},\"\".concat(P,\"-\").concat(f),f),u(r,\"\".concat(P,\"-image\"),d&&j),u(r,\"\".concat(P,\"-icon\"),g),r)),x=\"number\"===typeof m?{width:m,height:m,lineHeight:\"\".concat(m,\"px\"),fontSize:g?m/2:18}:{},R=t.props.children;if(d&&j)R=o.createElement(\"img\",{src:d,draggable:O,srcSet:h,onError:t.handleImgLoadError,alt:v});else if(g)R=g;else{if(t.avatarChildren||1!==k){var C=\"scale(\".concat(k,\") translateX(-50%)\"),E={msTransform:C,WebkitTransform:C,transform:C},I=\"number\"===typeof m?{lineHeight:\"\".concat(m,\"px\")}:{};R=o.createElement(\"span\",{className:\"\".concat(P,\"-string\"),ref:function(e){return t.avatarChildren=e},style:s(s({},I),E)},R)}else{R=o.createElement(\"span\",{className:\"\".concat(P,\"-string\"),style:{opacity:0},ref:function(e){return t.avatarChildren=e}},R)}}return delete w.onError,delete w.gap,o.createElement(\"span\",s({},w,{style:s(s({},x),w.style),className:_,ref:function(e){return t.avatarNode=e}}),R)},t}return e=p,(n=[{key:\"componentDidMount\",value:function(){this.setScale(),this.setState({mounted:!0})}},{key:\"componentDidUpdate\",value:function(t){t.src!==this.props.src&&this.setState({isImgExist:!0,scale:1}),t.children===this.props.children&&t.gap===this.props.gap||this.setScale()}},{key:\"render\",value:function(){return o.createElement(r.ConfigConsumer,null,this.renderAvatar)}}])&&f(e.prototype,n),l&&f(e,l),p}(o.Component);e.default=y,y.defaultProps={shape:\"circle\",size:\"default\"}},rc3b:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/user/[username]\",function(){return n(\"EE/t\")}])}},[[\"rc3b\",0,2,1,3,4,5,7,8,9,10,12,13,14,19,20,27,6]]]);","extractedComments":[]}