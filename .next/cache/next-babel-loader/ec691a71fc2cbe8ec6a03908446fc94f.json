{"ast":null,"code":"import _slicedToArray from \"/github/workspace/node_modules/next/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Link from 'next/link';\nimport { Flex } from '@/components/container';\nimport QuickLogin from '@/components/auth';\nimport Button from '@/components/button';\nimport { Modal } from '@/components/popover';\nimport Input from '@/components/input';\nimport { User, Lock } from '@/components/svg';\nimport { login } from '@/utils/api';\nimport { Context } from '@/utils/global';\nimport ShowNotification from '@/utils/notification';\nexport default function Login(props) {\n  var _React$useState = React.useState(false),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      loading = _React$useState2[0],\n      setLoading = _React$useState2[1];\n\n  var context = React.useContext(Context); //   const [getUsername, setGetUsername] = React.useState<() => string>(() => () => '');\n  //   const [getPassword, setGetPassword] = React.useState<() => string>(() => () => '');\n\n  var getUsername = function getUsername() {\n    return '';\n  };\n\n  var getPassword = function getPassword() {\n    return '';\n  };\n\n  var loginOK = React.useCallback(function () {\n    setLoading(true);\n    var username = getUsername();\n    var password = getPassword();\n    login(username, password).then(function (r) {\n      if (ShowNotification(r)) {\n        context.callback({\n          user: r.user\n        });\n        if (!!props.onClose) props.onClose();\n      }\n    })[\"finally\"](function () {\n      return setLoading(false);\n    });\n  }, [setLoading, props.onClose, getUsername, getPassword]);\n  return /*#__PURE__*/_jsxs(Flex, {\n    direction: \"TB\",\n    mainSize: \"large\",\n    fullWidth: true,\n    children: [/*#__PURE__*/_jsx(Input, {\n      prefix: /*#__PURE__*/_jsx(User, {}),\n      placeholder: \"\\u7528\\u6237\\u540D\",\n      style: {\n        width: '100%'\n      },\n      getValueCallback: function getValueCallback(cb) {\n        return getUsername = cb;\n      }\n    }), /*#__PURE__*/_jsx(Input, {\n      type: \"password\",\n      prefix: /*#__PURE__*/_jsx(Lock, {}),\n      placeholder: \"\\u5BC6\\u7801\",\n      style: {\n        width: '100%'\n      },\n      onEnterPressed: loginOK,\n      getValueCallback: function getValueCallback(cb) {\n        return getPassword = cb;\n      }\n    }), /*#__PURE__*/_jsx(QuickLogin, {}), /*#__PURE__*/_jsxs(Flex, {\n      children: [/*#__PURE__*/_jsx(Link, {\n        href: \"/register\",\n        children: /*#__PURE__*/_jsx(Button, {\n          neumorphism: true,\n          onClick: function onClick(e) {\n            return props.onClose();\n          },\n          children: \"\\u6CE8\\u518C\"\n        })\n      }), /*#__PURE__*/_jsx(Button, {\n        neumorphism: true,\n        primary: true,\n        loading: loading,\n        onClick: loginOK,\n        children: \"\\u767B\\u5F55\"\n      })]\n    })]\n  });\n}\nexport function LoginModal(props) {\n  return /*#__PURE__*/_jsx(Modal, {\n    show: props.show,\n    onClose: props.onClose,\n    style: {\n      maxWidth: 500,\n      width: '90%'\n    },\n    children: /*#__PURE__*/_jsx(Login, {\n      onClose: props.onClose\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}