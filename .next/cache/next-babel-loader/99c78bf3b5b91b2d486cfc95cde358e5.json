{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { Fragment } from 'react';\nimport Head from 'next/head';\nimport Link from 'next/link';\nimport { Flex } from '@/components/container';\nimport Card from '@/components/card';\nimport Avatar from '@/components/avatar';\nimport { Tooltip } from '@/components/popover';\nimport { Context } from '@/utils/global';\nimport { friends } from '@/utils/api';\nimport styles from './friends.module.scss';\nimport textStyles from '@/styles/text.module.scss';\nimport moment from '@/utils/moment';\nmoment.locale('zh-cn');\nconst maxPostNumber = 5;\n\nclass Friends extends React.Component {\n  static async getInitialProps(args) {\n    var data = await friends();\n    return {\n      friends: data,\n      rendered: true\n    };\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"getSourceData\", posts => {\n      var list = [];\n\n      for (var i = 0; i < maxPostNumber; i++) {\n        if (i < posts.length) {\n          var post = posts[i];\n          list.push( /*#__PURE__*/_jsxs(\"a\", {\n            href: post.link,\n            target: \"_blank\",\n            className: textStyles.color,\n            children: [/*#__PURE__*/_jsx(Tooltip, {\n              title: post.title,\n              ellipsis: true,\n              style: {\n                width: post.time !== 0 ? 'calc(100% - 5em)' : '100%',\n                display: 'inline-block'\n              },\n              children: post.title\n            }), post.time !== 0 ? /*#__PURE__*/_jsx(Tooltip, {\n              title: moment(post.time, 'X').format('YYYY-MM-DD HH:mm:SS'),\n              ellipsis: true,\n              style: {\n                width: '5em',\n                textAlign: 'right',\n                fontSize: '0.75em',\n                display: 'inline-block'\n              },\n              children: moment(post.time, 'X').fromNow()\n            }) : null]\n          }));\n        } else {\n          list.push( /*#__PURE__*/_jsx(Tooltip, {\n            ellipsis: true,\n            className: textStyles.color,\n            children: \"\\u6CA1\\u6709\\u6570\\u636E\"\n          }));\n        }\n      }\n\n      return list;\n    });\n\n    _defineProperty(this, \"renderCard\", friend => {\n      return /*#__PURE__*/_jsxs(Card, {\n        neumorphism: true,\n        style: {\n          width: '90vw',\n          maxWidth: 330,\n          position: 'relative',\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxs(Flex, {\n          direction: \"TB\",\n          fullWidth: true,\n          children: [/*#__PURE__*/_jsxs(Flex, {\n            wrap: false,\n            children: [/*#__PURE__*/_jsx(Flex.Item, {\n              style: {\n                flex: '0 0 5em',\n                display: 'flex',\n                justifyContent: 'center'\n              },\n              children: /*#__PURE__*/_jsx(Avatar, {\n                className: styles.avatar,\n                style: {\n                  width: '2.5em',\n                  height: '2.5em'\n                },\n                children: /*#__PURE__*/_jsx(\"img\", _objectSpread({\n                  src: friend.image\n                }, {\n                  referrerPolicy: 'no-referrer'\n                }))\n              })\n            }), /*#__PURE__*/_jsx(Flex.Item, {\n              style: {\n                flex: '1 1 auto'\n              },\n              children: /*#__PURE__*/_jsxs(Flex, {\n                direction: \"TB\",\n                subAxis: \"flex-start\",\n                children: [/*#__PURE__*/_jsx(Tooltip, {\n                  ellipsis: true,\n                  title: friend.name,\n                  children: /*#__PURE__*/_jsx(\"strong\", {\n                    children: /*#__PURE__*/_jsx(\"a\", {\n                      href: friend.link,\n                      target: \"_blank\",\n                      className: textStyles.color,\n                      children: friend.name\n                    })\n                  })\n                }), /*#__PURE__*/_jsx(Tooltip, {\n                  ellipsis: true,\n                  title: !!friend.description ? friend.description : '没有描述',\n                  className: textStyles.color,\n                  style: {\n                    lineHeight: '2em',\n                    width: '13em'\n                  },\n                  children: !!friend.description ? friend.description : '没有描述'\n                })]\n              })\n            })]\n          }), /*#__PURE__*/_jsx(Flex, {\n            direction: \"TB\",\n            mainAxis: \"space-around\",\n            fullWidth: true,\n            children: this.getSourceData(friend.posts).map((item, idx) => /*#__PURE__*/_jsx(Flex.Item, {\n              children: item\n            }, idx))\n          })]\n        }), !!friend.rss ? /*#__PURE__*/_jsx(\"div\", {\n          className: styles.corner,\n          style: {\n            background: !!friend.error ? 'crimson' : 'mediumseagreen'\n          },\n          children: !!friend.error ? '抓取失败' : '抓取成功'\n        }) : null]\n      });\n    });\n\n    this.state = {\n      loading: false\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/_jsx(Context.Consumer, {\n      children: context => /*#__PURE__*/_jsxs(Fragment, {\n        children: [/*#__PURE__*/_jsx(Head, {\n          children: /*#__PURE__*/_jsx(\"title\", {\n            children: `优秀博客订阅|${context.blog_name}`\n          })\n        }), /*#__PURE__*/_jsxs(Flex, {\n          direction: \"TB\",\n          fullWidth: true,\n          children: [/*#__PURE__*/_jsxs(Card, {\n            neumorphism: true,\n            children: [/*#__PURE__*/_jsx(\"h1\", {\n              className: textStyles.color,\n              style: {\n                display: 'inline-block',\n                marginRight: 10\n              },\n              children: \"\\u4F18\\u79C0\\u535A\\u5BA2\\u8BA2\\u9605\"\n            }), /*#__PURE__*/_jsx(\"p\", {\n              className: textStyles.secondary,\n              style: {\n                display: 'inline-block'\n              },\n              children: \"\\u53CB\\u60C5\\u94FE\\u63A5\"\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"\\u53EF\\u4EE5\\u5728\", /*#__PURE__*/_jsx(Link, {\n                href: \"/comment\",\n                children: /*#__PURE__*/_jsx(\"a\", {\n                  children: \"\\u8BC4\\u8BBA\\u533A\"\n                })\n              }), \"\\u6216\\u8005\\u4F7F\\u7528\", /*#__PURE__*/_jsx(\"a\", {\n                href: `mailto:${context.email}`,\n                children: \"\\u90AE\\u4EF6\"\n              }), \"\\u6DFB\\u52A0\\u8BA2\\u9605(\\u4EA4\\u6362\\u53CB\\u94FE)\"]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"\\u8981\\u6C42\\u5C31\\u662F\\u8D77\\u7801\", /*#__PURE__*/_jsx(\"b\", {\n                children: \"\\u4E00\\u5E74\\u80FD\\u66F4\\u65B0\\u51E0\\u7BC7\\u6587\\u7AE0\"\n              }), \"\\u540C\\u65F6\", /*#__PURE__*/_jsx(\"b\", {\n                children: \"\\u6DFB\\u52A0\\u672C\\u7AD9\\u53CB\\u94FE\"\n              }), \"\\uFF0C\\u522B\\u7684\\u53EA\\u8981\\u5185\\u5BB9\\u5408\\u6CD5\\u5408\\u89C4\\u5373\\u53EF\\uFF08\\u5176\\u4ED6\\u8981\\u6C42\\u89C6\\u5177\\u4F53\\u60C5\\u51B5\\u800C\\u5B9A\\uFF09\"]\n            }), /*#__PURE__*/_jsx(\"p\", {\n              children: \"\\u9664\\u53BB\\u4E2A\\u522B\\u9AD8\\u8D28\\u91CF\\u8BA2\\u9605\\uFF0C\\u5EFA\\u8BAE\\u6DFB\\u52A0\\u672C\\u7AD9\\u4F5C\\u4E3A\\u53CB\\u94FE\\uFF0C\\u5426\\u5219\\u53EF\\u80FD\\u4F1A\\u5F71\\u54CD\\u6392\\u5E8F\\uFF0C\\u6216\\u5BFC\\u81F4\\u8BA2\\u9605\\u88AB\\u79FB\\u9664\"\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"\\u5982\\u679C\\u53EF\\u4EE5\\uFF0C\\u6700\\u597D\\u63D0\\u4F9Blogo\\u4EE5\\u53CA\\u7AD9\\u70B9RSS\\uFF0CRSS\\u5C06\\u7528\\u4E8E\\u66F4\\u65B0\\u6700\\u65B0\\u6587\\u7AE0\\uFF08\\u6CA1\\u6709\\u4E5F\\u6CA1\\u4E8B\\uFF0C\\u5C31\\u5F53\\u6211\\u7EC3\\u4E60\\u722C\\u866B\\u6280\\u672F\\u4E86\\uFF09\", /*#__PURE__*/_jsx(\"br\", {}), \"\\u53CB\\u94FE\\u987A\\u5E8F\\u4F1A\\u6309\\u7167\\u535A\\u5BA2\\u6700\\u65B0\\u6587\\u7AE0\\u624B\\u52A8\\u968F\\u7F18\\u6392\\u5E8F\\uFF08\\u66F4\\u65B0\\u52E4\\u5FEB\\u7684\\u9AD8\\u8D28\\u91CF\\u5927\\u4F6C\\u4F18\\u5148\\uFF09\", /*#__PURE__*/_jsx(\"br\", {}), \"\\u6BCF\\u6B21\\u4F1A\\u5C06\\u6700\\u65B0 \", maxPostNumber, ' ', \"\\u7BC7\\u6587\\u7AE0\\u66F4\\u65B0\\u5230\\u8FD9\\u91CC\\uFF0C\\u8FD9\\u6837\\u6211\\u5C31\\u53EF\\u4EE5\\u5728\\u4E00\\u4E2A\\u9875\\u9762\\u770B\\u5230\\u8BF8\\u4F4D\\u5927\\u4F6C\\u7684\\u6700\\u65B0\\u6210\\u679C\\u4E86\"]\n            }), /*#__PURE__*/_jsxs(\"p\", {\n              children: [\"\\u53CB\\u94FE\\u6587\\u7AE0\\u722C\\u866B\\u89C1\", /*#__PURE__*/_jsx(\"a\", {\n                href: \"https://github.com/OhYee/blotter/tree/master/spider\",\n                target: \"_blank\",\n                children: \"\\u76F8\\u5173\\u4EE3\\u7801\"\n              }), \"\\uFF0CUser-Agent \\u4E3A\", /*#__PURE__*/_jsx(\"code\", {\n                children: \"OhYee Spider\"\n              }), \"\\uFF0C\\u5982\\u6709\\u5FC5\\u8981\\uFF0C\\u8BF7\\u52A0\\u767D\\u540D\\u5355\\u3002\\u6587\\u7AE0\\u722C\\u53D6\\u4EFB\\u52A1\\u4F1A\\u5728\\u6BCF\\u5929\\u51CC\\u6668 3 \\u70B9\\u6267\\u884C\"]\n            })]\n          }), /*#__PURE__*/_jsx(Flex, {\n            mainAxis: \"space-around\",\n            itemStyle: {\n              margin: 10\n            },\n            children: this.props.friends.map(friend => /*#__PURE__*/_jsx(Flex.Item, {\n              children: this.renderCard(friend)\n            }, friend.name))\n          })]\n        })]\n      })\n    });\n  }\n\n}\n\n_defineProperty(Friends, \"defaultProps\", {\n  friends: []\n});\n\nexport default Friends;","map":null,"metadata":{},"sourceType":"module"}