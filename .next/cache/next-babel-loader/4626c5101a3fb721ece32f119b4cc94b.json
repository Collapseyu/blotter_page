{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Head from 'next/head';\nimport { withRouter } from 'next/router';\nimport { layout } from '@/utils/api';\nimport { Context } from '@/utils/global';\nimport styles from '@/components/layout/layout.module.scss';\nimport SiderRenderer from '@/components/layout/sider';\nimport FooterRenderer from '@/components/layout/footer';\nimport FixedButton from '@/components/layout/fixed_button';\nimport { Flex } from '@/components/container';\nimport { concat } from '@/utils/component';\nimport { message } from '../notification';\n\nclass BasicLayout extends React.Component {\n  static async getInitialProps(args) {\n    var r = await layout();\n    return r;\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"context\", void 0);\n\n    _defineProperty(this, \"onResize\", () => {\n      const width = document.body.clientWidth;\n\n      if (width > 1024 && !this.context.big_screen) {\n        this.context.callback({\n          big_screen: true\n        });\n      } else if (width < 1024 && this.context.big_screen) {\n        this.context.callback({\n          big_screen: false\n        });\n      }\n    });\n\n    this.state = {\n      collapsed: true,\n      loginModal: false,\n      password: '',\n      okDisabled: false,\n      feedback: false\n    };\n  }\n\n  componentDidMount() {\n    this.context.callback({\n      big_screen: document.body.clientWidth > 1024\n    });\n    window.addEventListener('resize', this.onResize); // 苹果用户提醒\n    // https://github.com/facebook/react/issues/17258\n\n    var issafariBrowser = /Safari/.test(navigator.userAgent) && !/Chrome/.test(navigator.userAgent);\n\n    if (issafariBrowser) {\n      message({\n        alertType: 'warning',\n        autoClose: 0,\n        title: '苹果用户提醒',\n        content: /*#__PURE__*/_jsxs(\"div\", {\n          children: [\"\\u68C0\\u6D4B\\u5230\\u60A8\\u662F\\u82F9\\u679C\\u7528\\u6237\\uFF0CIOS 13 \\u540E Safari \\u7684 Webkit \\u53EF\\u80FD\\u5B58\\u5728 Bug\\uFF0C\\u90E8\\u5206\\u6309\\u94AE\\u53EF\\u80FD\\u96BE\\u4EE5\\u89E6\\u53D1\\uFF0C\\u8BF7\\u5FEB\\u901F\\u591A\\u6B21\\u70B9\\u51FB\\u6216\\u5C1D\\u8BD5\\u957F\\u6309\\u89E6\\u53D1\\u3002\\u76F8\\u5173\\u8BA8\\u8BBA\\u53EF\\u89C1\", ' ', /*#__PURE__*/_jsx(\"a\", {\n            href: \"https://github.com/facebook/react/issues/17258\",\n            children: \"Github\"\n          })]\n        })\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('resize', this.onResize);\n  }\n\n  render() {\n    if (typeof document !== 'undefined') document.body.className = concat('default', this.context.theme);\n    return /*#__PURE__*/_jsxs(\"div\", {\n      id: \"blotter_root\",\n      className: concat(styles.root),\n      children: [/*#__PURE__*/_jsx(Context.Consumer, {\n        children: context => /*#__PURE__*/_jsxs(Head, {\n          children: [/*#__PURE__*/_jsx(\"title\", {\n            children: context.blog_name\n          }), context.head && /*#__PURE__*/_jsx(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: context.head\n            }\n          })]\n        })\n      }), /*#__PURE__*/_jsx(SiderRenderer, {\n        pathname: this.props.router.pathname,\n        user: this.context.user,\n        avatar: this.context.avatar,\n        big_screen: this.context.big_screen,\n        theme: this.context.theme,\n        menus: this.context.menus,\n        callback: this.context.callback\n      }), /*#__PURE__*/_jsx(FixedButton, {}), /*#__PURE__*/_jsxs(Flex, {\n        direction: \"TB\",\n        mainAxis: \"space-around\",\n        mainSize: \"large\",\n        style: {\n          minHeight: '100vh',\n          width: this.context.big_screen ? 'calc(100vw - 320px)' : 'calc(100vw - 20px)',\n          margin: 'auto'\n        },\n        itemStyle: {\n          width: '100%'\n        },\n        children: [this.props.children, /*#__PURE__*/_jsx(FooterRenderer, {\n          beian: this.context.beian,\n          friends: this.context.friends,\n          view: this.context.view,\n          from: this.context.from\n        })]\n      })]\n    });\n  }\n\n}\n\n_defineProperty(BasicLayout, \"contextType\", Context);\n\nexport default withRouter(BasicLayout);","map":null,"metadata":{},"sourceType":"module"}