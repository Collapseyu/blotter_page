{"ast":null,"code":"import _toConsumableArray from \"/github/workspace/node_modules/next/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Link from 'next/link';\nimport Image from '@/components/image';\nimport TagPart from '@/components/tag';\nimport Card from '@/components/card';\nimport { Flex } from '@/components/container';\nimport { Eye, Calendar, Tag, Edit, Document } from '@/components/svg';\nimport { A } from '@/components/button';\nimport Loading from '@/components/loading';\nimport { Context } from '@/utils/global';\nimport { concat } from '@/utils/component';\nimport { formatSecond } from '@/utils/time';\nimport textStyles from '@/styles/text.module.scss';\nimport styles from './post_card.module.scss';\nexport function CardContent(props) {\n  var _props$inPost = props.inPost,\n      inPost = _props$inPost === void 0 ? false : _props$inPost,\n      post = props.post;\n  var context = React.useContext(Context);\n  var title = [/*#__PURE__*/_jsx(\"h2\", {\n    className: concat(textStyles.color, textStyles.ellipsis),\n    title: post.title,\n    children: post.title\n  }, \"title\"), /*#__PURE__*/_jsx(\"p\", {\n    className: textStyles.color,\n    children: post[\"abstract\"]\n  }, \"abstract\")];\n  var publishTime = formatSecond(post.publish_time);\n  var editTime = formatSecond(post.edit_time);\n  return /*#__PURE__*/_jsxs(Flex, {\n    direction: \"TB\",\n    fullWidth: true,\n    className: styles.post_card,\n    children: [!inPost ? /*#__PURE__*/_jsx(Link, {\n      href: \"/post/[url]\",\n      as: \"/post/\".concat(post.url),\n      children: /*#__PURE__*/_jsx(\"a\", {\n        className: textStyles.color,\n        children: title\n      })\n    }) : title, /*#__PURE__*/_jsxs(Flex, {\n      mainAxis: \"flex-start\",\n      className: styles.info,\n      children: [/*#__PURE__*/_jsxs(Flex, {\n        mainAxis: \"flex-start\",\n        mainSize: \"small\",\n        children: [/*#__PURE__*/_jsx(Eye, {}), /*#__PURE__*/_jsx(\"span\", {\n          style: {\n            fontSize: '0.8em'\n          },\n          children: !!post.view ? post.view : 0\n        })]\n      }), /*#__PURE__*/_jsxs(Flex, {\n        mainAxis: \"flex-start\",\n        mainSize: \"small\",\n        children: [/*#__PURE__*/_jsx(Calendar, {}), /*#__PURE__*/_jsx(\"time\", {\n          dateTime: publishTime.replace(' ', 'T') + 'T+08',\n          style: {\n            fontSize: '0.8em'\n          },\n          children: publishTime\n        })]\n      }), post.publish_time == post.edit_time ? null : /*#__PURE__*/_jsxs(Flex, {\n        mainAxis: \"flex-start\",\n        mainSize: \"small\",\n        children: [/*#__PURE__*/_jsx(Edit, {}), /*#__PURE__*/_jsx(\"time\", {\n          dateTime: editTime.replace(' ', 'T') + 'T+08',\n          style: {\n            fontSize: '0.8em'\n          },\n          children: editTime\n        })]\n      }), /*#__PURE__*/_jsxs(Flex, {\n        mainAxis: \"flex-start\",\n        mainSize: \"small\",\n        children: [/*#__PURE__*/_jsx(Document, {}), /*#__PURE__*/_jsx(\"span\", {\n          style: {\n            fontSize: '0.8em'\n          },\n          children: \"\\u672C\\u6587\\u7AE0\\u5171 \".concat(post.length, \" \\u5B57 / \\u9884\\u8BA1\\u9605\\u8BFB\\u65F6\\u95F4 \").concat(Math.max(1, Math.round(post.length / 400)), \" \\u5206\")\n        })]\n      }), inPost && (context.user.permission & 1) == 1 ? /*#__PURE__*/_jsx(Link, {\n        href: \"/admin/post?url=\".concat(post.url),\n        passHref: true,\n        children: /*#__PURE__*/_jsx(A, {\n          primary: true,\n          neumorphism: true,\n          size: \"small\",\n          target: \"_blank\",\n          children: \"\\u7F16\\u8F91\"\n        })\n      }) : null]\n    }), /*#__PURE__*/_jsx(\"div\", {}), /*#__PURE__*/_jsx(Flex, {\n      mainAxis: \"flex-start\",\n      subSize: \"middle\",\n      children: [/*#__PURE__*/_jsx(Tag, {}, \"tag_icon\")].concat(_toConsumableArray(post.tags.map(function (tag) {\n        return /*#__PURE__*/_jsx(TagPart, {\n          tag: tag\n        }, tag[\"short\"]);\n      })))\n    })]\n  });\n}\nexport default function PostCard(props) {\n  var post = props.post;\n  var loading = props.loading || typeof props.post === 'undefined';\n  return /*#__PURE__*/_jsx(Card, {\n    neumorphism: true,\n    cover: !loading && post.head_image ? /*#__PURE__*/_jsx(Image, {\n      src: post.head_image,\n      height: \"300px\",\n      alt: \"\\u6587\\u7AE0\\u300E\".concat(post.title, \"\\u300F\\u7684\\u5934\\u56FE\"),\n      title: post.title\n    }) : null,\n    children: loading ? /*#__PURE__*/_jsx(Loading, {}) : /*#__PURE__*/_jsx(CardContent, {\n      post: post\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}