{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React from 'react';\nimport Head from 'next/head';\nimport Button from '@/components/button';\nimport Card from '@/components/card';\nimport { Save } from '@/components/svg';\nimport { DynamicForm } from '@/components/input';\nimport { DndProvider } from 'react-dnd';\nimport { HTML5Backend } from 'react-dnd-html5-backend';\nimport { variables, variablesSet } from '@/utils/api';\nimport { Context } from '@/utils/global';\nimport ShowNotification from '@/utils/notification';\n\nclass AdminVariables extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: false,\n      variables: {\n        ad_inner: '',\n        ad_show: '',\n        ad_text: '',\n        author: '',\n        avatar: '',\n        awards: '',\n        beian: '',\n        blog_name: '',\n        description: '',\n        edu: '',\n        email: '',\n        from: '',\n        github: '',\n        github_id: '',\n        github_redirect: '',\n        github_secret: '',\n        grey: false,\n        head: '',\n        qiniu_access_key: '',\n        qiniu_prefix: '',\n        qiniu_secret_key: '',\n        qiniu_static_domain: '',\n        qq: '',\n        qq_id: '',\n        qq_key: '',\n        qq_redirect: '',\n        qqrobot: '',\n        quote: '',\n        root: '',\n        smtp_address: '',\n        smtp_password: '',\n        smtp_user: '',\n        smtp_username: '',\n        view: '',\n        vmess: '',\n        zhihu: '',\n        server_chan: '',\n        easter_egg: ''\n      }\n    };\n  }\n\n  async componentDidMount() {\n    this.setState({\n      loading: true\n    });\n    var r = await variables();\n    var obj = {};\n\n    for (var i in r) {\n      obj[r[i].key] = r[i].value;\n    }\n\n    this.setState({\n      variables: r,\n      loading: false\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxs(Card, {\n      neumorphism: true,\n      style: {\n        overflow: 'auto'\n      },\n      children: [/*#__PURE__*/_jsx(Context.Consumer, {\n        children: context => /*#__PURE__*/_jsx(Head, {\n          children: /*#__PURE__*/_jsx(\"title\", {\n            children: `变量列表|后台|${context.blog_name}`\n          })\n        })\n      }), /*#__PURE__*/_jsx(\"div\", {\n        style: {\n          minWidth: 1000\n        },\n        children: /*#__PURE__*/_jsx(DndProvider, {\n          backend: HTML5Backend,\n          children: /*#__PURE__*/_jsx(DynamicForm, {\n            value: this.state.variables,\n            callback: value => {\n              this.setState({\n                variables: value\n              });\n            }\n          })\n        })\n      }), /*#__PURE__*/_jsx(Button, {\n        circle: true,\n        size: \"large\",\n        primary: true,\n        icon: /*#__PURE__*/_jsx(Save, {}),\n        neumorphism: true,\n        onClick: async () => {\n          const v = this.state.variables;\n          const data = Object.keys(v).map(key => ({\n            key,\n            value: v[key]\n          }));\n          var r = await variablesSet(data);\n          ShowNotification(r);\n        },\n        style: {\n          position: 'fixed',\n          right: '20px',\n          top: '120px'\n        }\n      })]\n    });\n  }\n\n}\n\n_defineProperty(AdminVariables, \"defaultProps\", {});\n\nexport default AdminVariables;","map":null,"metadata":{},"sourceType":"module"}